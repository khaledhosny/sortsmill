m4_defun([check_fsys_c],
[
AT_SETUP([$1])
AT_KEYWORDS([gutils fsys_c unit])
AT_SKIP_IF([test x"${utf8_locale}" = x])
AT_CHECK_UNQUOTED([LC_ALL="${utf8_locale}" LANGUAGE="${utf8_locale}" "${abs_builddir}"/$1],[$2],[$3],[$4])
AT_CLEANUP
])

check_fsys_c([test_GFileGetUserConfigDir],[0],[${HOME}/.config/${PACKAGE}],[])
check_fsys_c([test_GFileGetUserCacheDir],[0],[${HOME}/.cache/${PACKAGE}],[])
check_fsys_c([test_GFileGetUserDataDir],[0],[${HOME}/.local/share/${PACKAGE}],[])
check_fsys_c([test_GFileGetHomeDir],[0],[${HOME}],[])
check_fsys_c([test_GFileBuildName a b],[0],[a/b],[])
check_fsys_c([test_GFileBuildName a ''],[0],[a],[])
check_fsys_c([test_GFileBuildName '' b],[0],[b],[])
check_fsys_c([test_GFileBuildName a/ b],[0],[a/b],[])
check_fsys_c([test_GFileBuildName a /b],[0],[a/b],[])
check_fsys_c([test_GFileBaseName a/b],[0],[b],[])
check_fsys_c([test_GFileBaseName /b],[0],[b],[])
check_fsys_c([test_GFileBaseName b],[0],[b],[])
check_fsys_c([test_GFileBaseName ''],[0],[.],[])
check_fsys_c([test_GFileAppendFile a b 0],[0],[a/b],[])
check_fsys_c([test_GFileAppendFile a b 1],[0],[a/b/],[])
check_fsys_c([test_GFileAppendFile a/ b 1],[0],[a/b/],[])
check_fsys_c([test_GFileAppendFile a /b 1],[0],[a/b/],[])
check_fsys_c([test_GFileAppendFile a/ /b 0],[0],[a/b],[])
check_fsys_c([test_GFileAppendFile a/ /b 1],[0],[a/b/],[])
check_fsys_c([test_GFileAppendFile /a b 0],[0],[/a/b],[])
check_fsys_c([test_GFileAppendFile /a b 1],[0],[/a/b/],[])
check_fsys_c([test_GFileAppendFile /a/ b 1],[0],[/a/b/],[])
check_fsys_c([test_GFileAppendFile /a /b 1],[0],[/a/b/],[])
check_fsys_c([test_GFileAppendFile /a/ /b 0],[0],[/a/b],[])
check_fsys_c([test_GFileAppendFile /a/ /b 1],[0],[/a/b/],[])
