# -*- coding: utf-8 -*-

m4_defun([check_xunistr_h],
[
AT_SETUP([$1])
AT_KEYWORDS([auxiliary xunistr.c xunistr.h xunistring.h unit])
AT_SKIP_IF([test x"${utf8_locale}" = x])
AT_CHECK_UNQUOTED([LC_ALL="${utf8_locale}" LANGUAGE="${utf8_locale}" "${abs_builddir}"/$1],[$2],[$3],[$4])
AT_CLEANUP
])

check_xunistr_h([test_xunistr_h 'Eĥoŝanĝo ĉiuĵaŭde' 0],[0],
[Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
(NULL)
(NULL)
(NULL)






],[])

check_xunistr_h([test_xunistr_h 'Eĥoŝanĝo ĉiuĵaŭde' 1],[0],
[Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
(NULL)
(NULL)
(NULL)
E
E
E
E
E
E
],[])

check_xunistr_h([test_xunistr_h 'Eĥoŝanĝo ĉiuĵaŭde' 16],[0],
[Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
(NULL)
(NULL)
(NULL)
Eĥoŝanĝo ĉiuĵaŭd
Eĥoŝanĝo ĉiuĵaŭd
Eĥoŝanĝo ĉiuĵaŭd
Eĥoŝanĝo ĉiuĵaŭd
Eĥoŝanĝo ĉiuĵaŭd
Eĥoŝanĝo ĉiuĵaŭd
],[])

m4_foreach_w([n],[17 18 29],
[
check_xunistr_h([test_xunistr_h 'Eĥoŝanĝo ĉiuĵaŭde' n],[0],
[Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
(NULL)
(NULL)
(NULL)
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
Eĥoŝanĝo ĉiuĵaŭde
],[])
])

check_xunistr_h([test_xunistr_strtol_NULL "${abs_srcdir}"/test_xunistr_strtol.txt],
                [0],[ignore],[])

check_xunistr_h([test_xunistr_strtol_nonNULL "${abs_srcdir}"/test_xunistr_strtol.txt],
                [0],[ignore],[])

check_xunistr_h([test_xunistr_strtoul_NULL "${abs_srcdir}"/test_xunistr_strtol.txt],
                [0],[ignore],[])

check_xunistr_h([test_xunistr_strtoul_nonNULL "${abs_srcdir}"/test_xunistr_strtol.txt],
                [0],[ignore],[])

